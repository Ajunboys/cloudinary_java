buildscript {
}

allprojects {
    apply plugin: 'maven'
    apply plugin: 'signing'

    repositories {
        jcenter()
        mavenCentral()
    }

    signing {
        sign configurations.archives
    }
    project.ext.set("publishGroupId", group)
}

subprojects {
    tasks.withType(Test) {
        def maxForks = Runtime.runtime.availableProcessors()
        
        // No need to run more than 3 - one for each HTTPClient variant
        if (maxForks > 3) {
            maxForks = 3
        }
        maxParallelForks = maxForks

        // show standard out and standard error of the test JVM(s) on the console
        testLogging{
            showStandardStreams = true
            displayGranularity = 0
        }
        // listen to events in the test execution lifecycle
        beforeTest { descriptor ->
            logger.lifecycle("Running test: " + descriptor)
        }

    }
}
